<ng-container *ngIf="experiment">
  <h1>{{ experiment.name }}</h1>
  <div>
    <span [ngClass]="{green: experiment.status === 'Active', orange: experiment.status === 'Draft', red: experiment.status === 'Closed'}">{{experiment.status}}</span>
    <span *ngIf="experiment.status != 'Draft'"> &#9679; {{experiment.participantNum}} completed</span>
  </div>
  <div class="buttonsContainer">
    <button mat-raised-button color="primary" [routerLink]="['/participant', experiment._id, 'true']">View demo</button>
    <button mat-raised-button color="warn" *ngIf="experiment.status == 'Active'" (click)="closeExperiment()">Close experiment</button>
    <button mat-raised-button color="primary" *ngIf="experiment.status == 'Draft'" (click)="openExperiment()">Open experiment</button>
    <button mat-raised-button color="primary" *ngIf="experiment.status == 'Draft'" [routerLink]="['/research/experiment/create', experiment._id]">Edit experiment</button>
    <button mat-raised-button color="primary" *ngIf="experiment.status == 'Closed'">Download results</button>
    <button mat-raised-button color="warn" *ngIf="experiment.status == 'Closed' || experiment.status =='Draft'" (click)="dialog.showModal()">Delete experiment</button>
  </div>
  <mat-divider></mat-divider>
  <div>
    <mat-list>
      <mat-list-item>
        <span matListItemTitle>Type</span>
        <span matListItemLine>{{experiment.type}}</span>
      </mat-list-item>
      <mat-list-item *ngIf="experiment.status != 'Draft'">
        <span matListItemTitle>Opened at</span>
        <span matListItemLine>{{experiment.openedAt}}</span> <!--FIXME: format is not correct-->
      </mat-list-item>
      <mat-list-item *ngIf="experiment.status == 'Closed'">
        <span matListItemTitle>Closed at</span>
        <span matListItemLine>{{experiment.closedAt}}</span>
      </mat-list-item>
      <mat-list-item>
        <span matListItemTitle>Maximum number of participants</span>
        <span matListItemLine>{{experiment.maxParticipantNum}}</span>
      </mat-list-item>
    </mat-list>
  </div>
  <div id="testDiv"></div>
  <div id="mySketch"></div>
  <h2>Description</h2>
  <p>{{ experiment.researcherDescription }}</p>44
  <h2>Participant description</h2>
  <p>{{ experiment.participantDescription }}</p>

  <app-rounds-table [dataSource]="experiment.rounds"></app-rounds-table>

</ng-container>
<dialog #dialog [hidden]="!dialog.open">
  <h1>Are you sure you want to delete this experiment?</h1>
  <div>
    <button mat-raised-button color="primary" (click)="dialog.close()">Cancel</button>
  <button mat-raised-button color="warn" (click)="dialog.close();deleteExperiment()">Delete</button>
  </div>
</dialog>
